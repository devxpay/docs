# Обзор

Управлять платежами можно с помощью [личного кабинета](https://help.rbkmoney.com/lk/lk/) и/или путем обращения к [RBK.money Platform API](https://developer.rbk.money/api/).
Способы приема платежей описаны на шаге 2 раздела [«‎С чего начать?»](https://developer.rbk.money/index.html#_2).

Ниже приведено описание основных терминов и понятий, которыми оперирует платформа.

!!! note "Платформа (Platform)"
    Программно-аппаратный комплекс RBK.money, обеспечивающий техническую реализацию бизнес-процессов по приему платежей.

## Личный кабинет {#lk}

Чтобы начать работать с платформой, необходимо [зарегистрироваться](https://help.rbkmoney.com/lk/lk/#reg) и [получить доступ](https://help.rbkmoney.com/lk/lk/#preparation) к [личному кабинету](https://rbk.money/back-office/) мерчанта (далее по тексту — ЛК).

!!! note "Мерчант (Merchant)"
    Продавец товара или услуги, которую оплачивает покупатель. Участник информационно-технического и финансового взаимодействия.

В нем вы сможете найти [API-ключ](https://help.rbkmoney.com/lk/lk/#apiKey) (API Key) для прохождения [аутентификации](#api) при обращении к API, а также провести [тестовый платеж](https://help.rbkmoney.com/lk/lk/#testManagement).

## API {#api}

Одним из способов  приема платежей является интеграция с платформой по [RBK.money Platform API](https://developer.rbk.money/api/).

C целью успешной авторизации запроса к [API](https://developer.rbk.money/api) в его заголовке следует передать  соответствующий ключ.  Для каждого отдельного запроса могут потребоваться различные ключи: зависит от типа выполняемой операции.

Так, например, [API-ключ](https://developer.rbk.money/api/#section/Authentication) передается в [запросе](https://developer.rbk.money/api/#operation/createInvoice) на создание [инвойса](#invoice), а [ключ доступа к инвойсу](#invoiceAccessToken) — в последующих [запросах](#payScheme), нацеленных на оплату выставленного счета.

## Магазин {#shop}

Магазин — торговая точка мерчанта. Представляет собой способ обобщения товаров или услуг, объединённых одной категорией (MCC, Merchant Category Code). Является получателем платежа.

Магазину соответствует как минимум один [счет](https://developer.rbk.money/api/#operation/getAccountByID) в платформе, на котором аккумулируются полученные от покупателей денежные средства.

!!! note "Покупатель (Payer)"
    Физическое лицо, осуществляющее оплату товаров или услуг. В некоторых случаях упоминается как «‎плательщик».

Накопленные средства можно получить с помощью банковского перевода или на баланс [электронного кошелька RBK.money](https://developer.rbk.money/docs/wallets/overview/).

Магазин может быть:

* активным или [неактивным](https://help.rbkmoney.com/lk/lk/#holdShop);
* настоящим или [тестовым](https://help.rbkmoney.com/lk/lk/#testManagement).

Получить информацию о магазине, а также управлять его активностью можно с помощью [данных](https://developer.rbk.money/api/#tag/Shops) запросов к api.

## Инвойс {#invoice}

Определение инвойса изложено в [руководстве пользователя ЛК](https://help.rbkmoney.com/lk/lk/#createInvoice).

Создать инвойс или получить его состояние можно с помощью [данных](https://developer.rbk.money/api/#tag/Invoices) запросов к api.
В результате выполнения запроса [createInvoice](https://developer.rbk.money/api/#operation/createInvoice) в платформе создается счет, ожидающий оплату, которому присваивается уникальный идентификатор и [ключ доступа](#invoiceAccessToken).

Жизненный цикл счета на оплату отражен в [данном](https://help.rbkmoney.com/lk/lk/#invoiceLifeCycle) разделе руководства, а также в разделе [«‎Состояния и статусы инвойса»](https://developer.rbk.money/api/#section/Sostoyaniya-i-statusy-invojsa) документации API.

### Ключ доступа к инвойсу {#invoiceAccessToken}

Ключ (InvoiceAccessToken) позволяет авторизовать ограниченное количество операций, необходимых для проведения платежей по указанному [инвойсу](#invoice).

InvoiceAccessToken, в отличие от [API Key](https://developer.rbk.money/api/#section/Authentication), допустимо публиковать.

## Платеж {#pay}

Для того чтобы денежные средства за предложенные покупателю товары или услуги поступили на [счет магазина](#shop), необходимо оплатить [инвойс](#invoice).

В случае, когда оплата производится с [платежной формы RBK.money](https://developer.rbk.money/docs/payments/checkout/),  последовательность взаимодействия с платформой выглядит так:

* вызвать метод [createInvoice](https://developer.rbk.money/api/#operation/createInvoice);
* [встроить](https://developer.rbk.money/docs/payments/checkout/) платежную форму в браузер покупателя.

Далее [платежная форма](https://developer.rbk.money/docs/payments/checkout/) самостоятельно выполняет весь процесс проведения платежа.

В случае, когда вы сами верстаете платежную форму,
последовательность взаимодействия с платформой выглядит так, как показано в разделе [«‎Схема информационного взаимодействия»](#payScheme).

Жизненный цикл платежа отражен в [данном руководстве пользователя](https://help.rbkmoney.com/lk/lk/#payLifeCycle).

### Схема информационного взаимодействия {#payScheme}

Ниже приведен пример оплаты [инвойса](#invoice) с web-сайта мерчанта в случае, когда платеж производится с его собственной платежной формы.

Названия представленных на схеме запросов указывают на конкретные методы платежного [API](https://developer.rbk.money/api/).

<a href="/docs/payments/wsd/payScheme.png" data-lightbox="payScheme.png" data-title="payScheme.png"><img src="/docs/payments/wsd/payScheme.png"></a>

!!! note "Информация"
    Получение, обработка и хранение данных банковских карт влечет за собой необходимость соответствовать [определенным стандартам безопасности](https://ru.pcisecuritystandards.org/minisite/env2/).

## Уведомление о событиях (Webhook)

Для того чтобы отслеживать состояние инвойсов и платежей, необходимо настроить уведомления (webhook/callback).

Webhook'ами можно управлять с помощью [данных](https://developer.rbk.money/api/#tag/Webhooks) запросов к API.

При получении уведомления следует убедиться, что оно было отправлено платформой. Для решения этой задачи платформа подтверждает подлинность переданной информации, подписывая сообщения приватным ключом RSA. C описанием спецификации «‎Webhooks Events API» можно ознакомиться [здесь](https://developer.rbk.money/api/webhooks).

